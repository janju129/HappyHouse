<!DOCTYPE HTML>
<!--
  Helpful link: https://www.w3schools.com/howto/howto_js_full_page_tabs.asp
-->

<style>

/* For the header */
 #tasks-header {
   margin: 0 auto;
   position: relative;
   background: #eaeaeb;
   color: grey;
   overflow: hidden;
   font-family: sans-serif;
   padding: 20px;
 }

 /* To center the objects */
 .centered {
   margin: 0 auto;
   position: absolute;
   top: 50%;
   left: 50%;
   font-size: 20px;
   font-family: sans-serif;
   transform: translate(-50%, -50%);
 }

 .tabcontent{
    padding: 20px 20px;
    text-align: center;
  }

.tabheader{
    margin: 25px;
    padding: 20px 20px;
}

/* To position the homepage icon*/
 .right-side a {
   float: right;
   margin: 0 auto;
 }

/* enables full page tabs */
  body, html{
  height: 100%;
  margin: 0 auto;
  font-family: sans-serif;
}

/* For the tabs */
  .tablink{
  color: black;
  float: left;
  border: none;
  outline: none;
  cursor: pointer;
  padding: 14px 16px;
  font-size: 17px;
  width: 33.33%;
  margin: 0;
}

  .tablink:hover{
  background-color: #777;
}

.messageThread li{
  margin: 10px;
  padding: 15px;
  background: #eaeaeb;
}

ol {
  list-style-type: none;
  padding: 0;
  margin: 0;
}

button{
  margin: 10px;
}

</style>

<!-- THE START OF THE HTML -->
<html>
  <head>
    <title>TASKS</title>
  </head>

    <body>

    <!--The header-->
    <div class="header" id="tasks-header">
      <div class="centered">
        <p><b>TASKS</b></p>
      </div>
      <div class="right-side">
        <a href="index.html" id="homepage">Homepage<a>
      </div>
    </div>

    <!--The New, In-Progress, and Completed Tabs-->
    <button id="openingTab" class="tablink" onclick="openPage('New', this, '#777')">New</button>
    <button class="tablink" onclick="openPage('In-Progress', this, '#777')">In-Progress</buton>
    <button class="tablink" onclick="openPage('Completed', this, '#777')">Completed</button>

    <!--New Task Tab-->
    <div id="New" class="tabcontent">

      <div class="tabheader">
        <h1>NEW TASKS</h1>
        <p>Choose a task to assign or create new task</p>
      </div>

      <div id="initial">
        <input type = "checkbox" id = "checkNewTask" onclick = "checkNew()">
        Name of task
        <div id="addedTask">
          <p id="newTaskAdded">
        </div>

        <div id="assignButton" style="display:none">
          <button onclick = "toAssign()">Assign?</button>
        </div>

        <div id="makeTask" style="display:none">
          <form id = "tform">
            <input type = "text" name = "newTask">
          </form>
            <input type = "button" value = "Create" onclick = "addTask()">

            <button onclick = "newTaskHome()">Done</button>
        </div>

        <button onclick="addTask()" id="atbutton">Add New Task</button>
      </div>

      <!--<div id="makeTask" style="display:none">
        <p>
        <form id = "tform">
          <input type = "text" name = "newTask">
        </form>
          <input type = "button" value = "Create" onclick = "addTask()">

          <button onclick = "newTaskHome()">Cancel</button>
      </div> -->


      <!--The button that appears when the users wants to assign a task-->
      <!--<div id="assignButton" style="display:none">
        <button onclick = "toAssign()">Assign?</button>
      </div> -->

      <!--<div id="addNewTaskButton">
        <button onclick="addTask()">Add New Task</button>
      </div> -->

      <!--What appears when the user wants to assign a task-->
      <div id="assigning" style="display:none">
        <p>Assign a task to</p>

        <form id="assignUser">
          <input type="radio" name="user" value="User 1"> User 1 <br>
          <input type="radio" name="user" value="User 2"> User 2 <br>
          <input type="radio" name="user" value="User 3"> User 3 <br>
        </form>

        <input type="submit" value="Assign" onclick="assignDone()">
        <button onclick="newTaskHome()">Cancel</button>
      </div>

      <div id="pendingApproval" style="display:none">
        <p>Task request sent to <h4 id="userName"></h4>for approval</p>
        <button onclick = "newTaskHome()">Done</button>
      </div>

    </div>

    <!--In-Progress Task Tab-->
    <div id="In-Progress" class="tabcontent">

      <div class="tabheader">
        <h1>TASKS IN-PROGRESS</h1>
        <p id="instIP1">Choose a message thread to view</p>
        <p id="instIP2" style="display:none">Add a message to this thread</p>
      </div>

      <!--What first appears on the in-progress tab-->
      <div id="initialIP">
        <input type = "checkbox" id = "myCheckIP" onclick = "checkFunctionIP()">
        task is being worked on by User 1
      </div>

      <div id="textIP" style="display:none">
        <button onclick = "viewChat()">View Chat?</button>
      </div>

      <div class="messageThread" id="messageThread" style="display:none">
        <ol id="chat">
            <li id="test">Sample Message<br>-User 1</li>

        </ol>
        <input type="text" id="message"/>
        <button onclick="sendMessage()">Send</button>
        <button onclick="inProgressHome()">Exit Chat</button>
      </div>

    </div>

    <!--Completed Task Tab-->
    <div id="Completed" class="tabcontent">

      <div class="tabheader">
        <h1>COMPLETED TASKS</h1>
        <p>A list of the user's completed tasks</p>
      </div>
    </div>

    <script>
        document.getElementById("openingTab").click();
    /*
     * FUNCTIONS IN THE NEW TAB
     */


     /*NEED TO FIX*/
     function addTask(){
       document.getElementById("initial").style.display = "none";
       document.getElementById("makeTask").style.display = "block";
       document.getElementById("atbutton").style.display = "none";

       var node1 = document.createElement("input");
       node1.type = "checkbox";
       document.getElementById("newTaskAdded").appendChild(node1);

       var f = document.getElementById("tform");
       var t = f.elements["newTask"].value;
       var node = document.createElement("p");
       var nodetext = document.createTextNode(t);
       node.appendChild(nodetext);
       document.getElementById("newTaskAdded").appendChild(node);
     }

    /* To go to the home screen for new task tab */
    function newTaskHome(){
      document.getElementById("initial").style.display = "block";
      document.getElementById("pendingApproval").style.display = "none";
      document.getElementById("assigning").style.display = "none";
      document.getElementById("makeTask").style.display = "none";
      document.getElementById("atbutton").style.display = "block";
      document.getElementById("checkNewTask").checked = false;
    }

    /* To show the message about pending approval */
    function assignDone(){
      document.getElementById("pendingApproval").style.display = "block";
      document.getElementById("assigning").style.display = "none";
      var val;
      var f = document.getElementById("assignUser");
      var radios = f.elements["user"];
      for(var i = 0, len = radios.length; i < len; i++){
        if(radios[i].checked){
          val = radios[i].value;
          break;
        }
      }
      document.getElementById("userName").innerHTML = val;
    }

    /* To assign a task */
    function toAssign(){
      document.getElementById("assignButton").style.display = "none";
      document.getElementById("initial").style.display = "none";
      document.getElementById("assigning").style.display = "block";
    }

    /* for the checkbox in new tab*/
    function checkNew(){
      var checkbox = document.getElementById("checkNewTask");
      var text = document.getElementById("assignButton");
      if (checkbox.checked == true){
        text.style.display = "block";
      }
      else{
        text.style.display = "none";
      }
    }

    /*
     * FUNCTIONS IN THE IN-PROGRESS TAB
     */
    /* for the checkbox in in-progress tab*/
    function checkFunctionIP(){
      var checkbox = document.getElementById("myCheckIP");
      var text = document.getElementById("textIP");
      if (checkbox.checked == true){
        text.style.display = "block";
      }
      else{
        text.style.display = "none";
      }
    }

    /* to show the home screen of the in-progress tab */
    function inProgressHome(){
      document.getElementById("myCheckIP").checked = false;
      document.getElementById("initialIP").style.display = "block";
      document.getElementById("messageThread").style.display = "none";
      document.getElementById("instIP1").style.display = "block";
      document.getElementById("instIP2").style.display = "none";
    }

    /* to add a message */
    function viewChat(){
      document.getElementById("initialIP").style.display = "none";
      document.getElementById("textIP").style.display = "none";
      document.getElementById("messageThread").style.display = "block";
      document.getElementById("instIP1").style.display = "none";
      document.getElementById("instIP2").style.display = "block";
    }

    /* to send a message */
    function sendMessage(){
      var ul = document.getElementById("chat");
      var message = document.getElementById("message");
      var li = document.createElement("li");
      li.setAttribute('id',message.value);
      li.appendChild(document.createTextNode(message.value));
      var b = document.createElement("br");
      li.appendChild(b);
      li.appendChild(document.createTextNode("-User 1"));
      ul.appendChild(li);
    }

    /* for the tabs*/
    function openPage(pageName, elmnt, color){
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent");
        for(i = 0; i < tabcontent.length; i++){
          tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tablink");
        for(i = 0; i < tablinks.length; i++){
          tablinks[i].style.backgroundColor="";
        }
        document.getElementById(pageName).style.display="block";
        elmnt.style.backgroundColor=color;

        document.getElementById("defaultOpen").click();
      }

    </script>
  </body>
</html>
